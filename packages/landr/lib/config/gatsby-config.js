const path = require('path');
const nodeModulesPath = path.resolve(__dirname + '/../../node_modules')
module.exports = (userDir, gitInfo) => {
  return `
  // Don't touch: this is an autogenerated file from ./config/gatsby-config.js.
  module.exports = {
    plugins: [
      {
        resolve: '${nodeModulesPath}/gatsby-source-github',
        options: {
          owner: '${gitInfo.getUsername()}',
          repo: '${gitInfo.getName()}',
        },
      },
      {
        resolve: '${nodeModulesPath}/gatsby-source-filesystem',
        options: {
          name: 'readme',
          path: '${userDir}/README.md',
        },
      },
      '${nodeModulesPath}/gatsby-plugin-postcss-sass',
      {
        resolve: '${nodeModulesPath}/gatsby-transformer-readme',
      },
      {
        resolve: '${nodeModulesPath}/gatsby-source-filesystem',
        options: {
          name: 'changelog',
          path: '${userDir}/CHANGELOG.md',
        },
      },
      {
        resolve: '${nodeModulesPath}/gatsby-transformer-changelog',
        options: {
          headerDepth: 2
        },
      },
      {
        resolve: '${nodeModulesPath}/gatsby-plugin-landr',
        options: {
          userDir: '${userDir}'
        },
      },
    ],
    pathPrefix: '/${gitInfo.getName()}'
  }
  `;
};
